

[TOC]

# sidenav 侧边导航栏

## 需求:

1. 滚动进度条：随着页面的滚动，进度条的高度动态变化，反映当前页面的滚动位置。
2. 导航栏高亮：根据当前视窗内的内容区域，动态高亮对应的导航栏项的一级标题，并且展开这个一级标题下的所有二级标题。
3. 电梯导航：点击导航标题页面平滑滚动到对应的目标内容区域，并且更新导航栏高亮状态，进度条也要同步更新。
4. 响应式设计：在窗口大小调整时，重新计算内容区域的位置，保证滚动进度体条和导航栏高亮的功能正常，并且更新进度条和导航栏的高亮状态。
5. 悬停在标题上有效果提醒它们可以点击。
6. 点击标题触发动画效果。

## 实现思路:

- 滚动进度条：需要获取当前滚动的位置，可滚动的高度，计算当前滚动位置占总滚动高度的比例，动态设置进度条的高度。
- 导航栏高亮：在每次滚动时，先移除所有导航栏项的高亮效果,之后使用 `getBoundingClientRect`获取每个内容区域的边界信息，遍历所有内容区域，检查是否有区域在视窗内，如果有内容区域在视窗内，通过遍历导航栏项，找到和内容区域的`id`匹配相同的的`data-section`属性，之后添加类名，使一级标题高亮，若有二级标题则展开。
- 电梯导航：为每个标题绑定点击事件，点击标题后，将目标内容区域滚动到视窗内，设置属性实现平滑滚动，看起来舒适。在滚动完成后，更新导航栏的高亮状态，并同步更新进度条。
- 响应式设计：监听窗口大小调整事件，在窗口大小调整时，重新计算每个内容区域的位置，根据新的窗口尺寸，重新计算进度条高度和导航栏的高亮状态。
- 悬停在标题上时，添加类名。
- 在导航标题被点击时，为其添加类，触发动画效果，使用 `setTimeout` 在动画持续时间（如1200ms）后移除类，恢复默认状态。

## 优点:

- 进度条能够实时反映当前页面的滚动位置，为用户提供清晰的导航反馈。
- 导航栏项能够根据当前视窗内的内容区域动态高亮，帮助用户快速定位。
- 在不同设备和窗口尺寸下都能正常工作。

## MathJax:

为了演示这个组件的效果，内容区域我们全部使用MathJax库实现的数学公式进行填充。

